(function(){"use strict";function escapeHtml(text){if(!text)return"";const div=document.createElement("div");div.textContent=text;return div.innerHTML}function formatDate(dateString){if(!dateString)return"";const date=new Date(dateString);return date.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}function getMonthNumber(monthName){const months={january:"01",february:"02",march:"03",april:"04",may:"05",june:"06",july:"07",august:"08",september:"09",october:"10",november:"11",december:"12"};return months[monthName.toLowerCase()]||"01"}function getImageUrl(userId,imageName,imageType){if(!imageName)return"";const currentUser=window.auth&&window.auth.getCurrentUser?window.auth.getCurrentUser():null;const actualUserId=userId||currentUser?.userId||currentUser?.username||"default";const imageKey=`life-trails-image-${actualUserId}-${imageName}`;const storedImage=localStorage.getItem(imageKey);if(storedImage){return storedImage}if(currentUser&&currentUser.userId){const warnKey=`image-warn-${imageName}`;if(!sessionStorage.getItem(warnKey)){console.log(`‚ÑπÔ∏è Image not yet loaded: ${imageName}. It will be loaded shortly.`);sessionStorage.setItem(warnKey,"true")}}return""}function initHeader(){const user=window.auth.getCurrentUser();const headerNav=document.querySelector(".header-nav");if(!headerNav)return;const isMobile=window.innerWidth<=768;if(isMobile){headerNav.innerHTML="";headerNav.style.display="none";headerNav.style.width="0";headerNav.style.height="0";headerNav.style.overflow="hidden";headerNav.style.visibility="hidden";return}if(user){const currentPath=window.location.pathname;let addEventPath="app/add/event/";let addFamilyPath="app/add/family/";let homePath="./";if(currentPath.includes("/app/dashboard/")){addEventPath="../add/event/";addFamilyPath="../add/family/";homePath="../../"}else if(currentPath.includes("/app/add/")){addEventPath="../event/";addFamilyPath="../family/";homePath="../../dashboard/"}else if(currentPath.includes("/app/signin/")){addEventPath="../add/event/";addFamilyPath="../add/family/";homePath="../../"}headerNav.innerHTML=`\n                <a href="${addEventPath}" class="btn btn-secondary">Add Event</a>\n                <a href="${addFamilyPath}" class="btn btn-secondary">Add Family</a>\n                <button onclick="window.auth.signOut(); window.location.href='${homePath}';" class="btn btn-secondary">Sign Out</button>\n                <button class="theme-toggle theme-toggle-light" onclick="window.themeManager.toggle()" aria-label="Toggle theme" data-theme="light">\n                    <div class="theme-toggle-track">\n                        <div class="theme-toggle-knob">\n                            <svg class="theme-toggle-icon theme-toggle-icon-sun" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n                                <circle cx="12" cy="12" r="4" stroke="currentColor" stroke-width="2" fill="none"/>\n                                <path d="M12 2v2M12 20v2M4.93 4.93l1.41 1.41M17.66 17.66l1.41 1.41M2 12h2M20 12h2M4.93 19.07l1.41-1.41M17.66 6.34l1.41-1.41" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>\n                            </svg>\n                            <svg class="theme-toggle-icon theme-toggle-icon-moon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" style="display: none;">\n                                <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z" stroke="currentColor" stroke-width="2" fill="none"/>\n                            </svg>\n                        </div>\n                    </div>\n                </button>\n            `}else{const currentPath=window.location.pathname;let signinPath="app/signin/";if(currentPath.includes("/app/dashboard/")){signinPath="../signin/"}else if(currentPath.includes("/app/add/")){signinPath="../../signin/"}else if(currentPath.includes("/app/signin/")){signinPath="./"}headerNav.innerHTML=`\n                <a href="${signinPath}" class="btn btn-primary">Sign In</a>\n                <button class="theme-toggle theme-toggle-light" onclick="window.themeManager.toggle()" aria-label="Toggle theme" data-theme="light">\n                    <div class="theme-toggle-track">\n                        <div class="theme-toggle-knob">\n                            <svg class="theme-toggle-icon theme-toggle-icon-sun" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n                                <circle cx="12" cy="12" r="4" stroke="currentColor" stroke-width="2" fill="none"/>\n                                <path d="M12 2v2M12 20v2M4.93 4.93l1.41 1.41M17.66 17.66l1.41 1.41M2 12h2M20 12h2M4.93 19.07l1.41-1.41M17.66 6.34l1.41-1.41" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>\n                            </svg>\n                            <svg class="theme-toggle-icon theme-toggle-icon-moon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" style="display: none;">\n                                <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z" stroke="currentColor" stroke-width="2" fill="none"/>\n                            </svg>\n                        </div>\n                    </div>\n                </button>\n            `}let resizeTimer;window.addEventListener("resize",function(){clearTimeout(resizeTimer);resizeTimer=setTimeout(initHeader,250)})}window.app={escapeHtml:escapeHtml,formatDate:formatDate,getMonthNumber:getMonthNumber,getImageUrl:getImageUrl,initHeader:initHeader};if(document.readyState==="loading"){document.addEventListener("DOMContentLoaded",initHeader)}else{initHeader()}})();import{fetchUserData}from"./services/api.js";import{decryptToken}from"./services/decrypt.js";(function(){"use strict";const AUTH_KEY="life-trails-auth";async function loadConfig(){try{if(typeof URLSearchParams!=="undefined"&&new URLSearchParams(window.location.search).get("refreshConfig")==="1"){localStorage.removeItem("appConfig")}const configFromStorage=localStorage.getItem("appConfig");if(configFromStorage){return JSON.parse(configFromStorage)}const configPath="/js/config/config.json?v="+Date.now();console.log("üìÇ Loading config from:",configPath);const response=await fetch(configPath,{cache:"no-store"});if(!response.ok){throw new Error(`Failed to load config.json: ${response.status} ${response.statusText}`)}const config=await response.json();console.log("‚úÖ Config loaded successfully");localStorage.setItem("appConfig",JSON.stringify(config));return config}catch(error){console.error("‚ùå Failed to load config:",error);throw new Error("Failed to load configuration: "+error.message)}}function isValidUsername(username){return/^[a-zA-Z0-9._-]+$/.test(username)&&username.length>0}async function isUsernameInConfig(username){try{const config=await loadConfig();return config.encryptedSecrets&&config.encryptedSecrets.hasOwnProperty(username)}catch(error){return false}}async function signIn(username,password){try{const trimmedUsername=(username||"").trim();if(!trimmedUsername||!password){return{success:false,error:"Please enter both username and password"}}if(!isValidUsername(trimmedUsername)){return{success:false,error:"Username can only contain letters, numbers, and . - _"}}console.log("üîê Sign in attempt started:",{username:trimmedUsername,passwordLength:password?.length});let config;try{config=await loadConfig();console.log("‚úÖ Config loaded:",{hasEncryptedSecrets:!!config.encryptedSecrets,usernames:config.encryptedSecrets?Object.keys(config.encryptedSecrets):[],requestedUsername:trimmedUsername,usernameExists:config.encryptedSecrets&&config.encryptedSecrets.hasOwnProperty(trimmedUsername)})}catch(configError){console.error("‚ùå Failed to load config:",configError);return{success:false,error:"Failed to load configuration. Please refresh the page."}}if(!config.encryptedSecrets){console.error("‚ùå No encryptedSecrets in config");return{success:false,error:"Configuration error: No encrypted secrets found."}}if(!config.encryptedSecrets[trimmedUsername]){console.error("‚ùå Username not found in config:",{username:username,availableUsernames:Object.keys(config.encryptedSecrets)});return{success:false,error:`Username "${trimmedUsername}" not found in configuration`}}console.log("üîì Username found in config, attempting decryption...");const encryptedSecret=config.encryptedSecrets[trimmedUsername];console.log("üì¶ Encrypted secret info:",{length:encryptedSecret?encryptedSecret.length:0,preview:encryptedSecret?encryptedSecret.substring(0,20)+"...":"null"});let decryptedToken;try{console.log("üîê Calling decryptToken with password...");decryptedToken=await decryptToken(encryptedSecret,password);console.log("‚úÖ Decryption successful!",{tokenLength:decryptedToken?decryptedToken.length:0,tokenPreview:decryptedToken?decryptedToken.substring(0,10)+"...":"null"});if(!decryptedToken||typeof decryptedToken!=="string"||decryptedToken.trim().length===0){console.error("‚ùå Decryption returned empty token");return{success:false,error:"Invalid password - decryption failed"}}}catch(decryptError){console.error("‚ùå Decryption error - invalid password:",decryptError);return{success:false,error:"Invalid password. Please check your password and try again."}}console.log("üì• Decryption successful, calling GitHub API to fetch user data...");let userData=null;try{userData=await fetchUserData(trimmedUsername,password,trimmedUsername);console.log("‚úÖ GitHub API call successful!",{hasData:!!userData,hasContent:!!userData?.content})}catch(fetchError){if(fetchError.message&&fetchError.message.includes("404")){console.log("‚ÑπÔ∏è User data not found (404) - new user, sign in successful");userData=null}else if(fetchError.message&&(fetchError.message.includes("401")||fetchError.message.includes("403"))){console.error("‚ùå GitHub API authentication failed (401/403):",fetchError.message);return{success:false,error:"Authentication failed. Please check your credentials."}}else if(fetchError.message&&fetchError.message.includes("Failed to fetch")){console.error("‚ùå Network error calling GitHub API:",fetchError.message);return{success:false,error:"Network error. Please check your internet connection and try again."}}else{console.error("‚ùå Error calling GitHub API:",fetchError);return{success:false,error:"Failed to authenticate with GitHub. Please try again."}}}let userInfo={name:trimmedUsername.replace(/[._-]/g," ").replace(/\b\w/g,l=>l.toUpperCase()),dateOfBirth:"",timeOfBirth:"",placeOfBirth:""};let dataToSave;if(userData&&userData.content){userInfo=userData.content;dataToSave={id:userInfo.id||trimmedUsername,name:userInfo.name||trimmedUsername,dateOfBirth:userInfo.dateOfBirth||"",timeOfBirth:userInfo.timeOfBirth||"",placeOfBirth:userInfo.placeOfBirth||"",family:userInfo.family||[],events:userInfo.events||{}}}else{const newId=typeof crypto!=="undefined"&&crypto.randomUUID?crypto.randomUUID():"id-"+Date.now()+"-"+Math.random().toString(36).slice(2);dataToSave={id:newId,name:trimmedUsername.replace(/[._-]/g," ").replace(/\b\w/g,l=>l.toUpperCase()),dateOfBirth:"",timeOfBirth:"",placeOfBirth:"",family:[],events:{}}}if(userData&&userData.content){console.log("üì• Loading images from GitHub (optimized batch loading)...");setTimeout(async()=>{try{const{fetchAllImagesFromDirectory:fetchAllImagesFromDirectory}=await import("./services/api.js");const requiredEventImages=new Set;const requiredFamilyImages=new Set;if(dataToSave.events){Object.keys(dataToSave.events).forEach(year=>{const yearEvents=dataToSave.events[year]||[];yearEvents.forEach(event=>{if(event.images&&Array.isArray(event.images)){event.images.forEach(imageName=>{if(imageName){requiredEventImages.add(imageName)}})}})})}if(dataToSave.family&&Array.isArray(dataToSave.family)){dataToSave.family.forEach(member=>{if(member.image){requiredFamilyImages.add(member.image)}})}console.log(`üìä Found ${requiredEventImages.size} event images and ${requiredFamilyImages.size} family images to load`);const fileUserId=dataToSave.id;const[eventImagesMap,familyImagesMap]=await Promise.allSettled([requiredEventImages.size>0?fetchAllImagesFromDirectory(trimmedUsername,null,fileUserId,"event"):Promise.resolve({}),requiredFamilyImages.size>0?fetchAllImagesFromDirectory(trimmedUsername,null,fileUserId,"family"):Promise.resolve({})]);let storedCount=0;if(eventImagesMap.status==="fulfilled"&&eventImagesMap.value){const fileUserId=dataToSave.id;requiredEventImages.forEach(imageName=>{if(eventImagesMap.value[imageName]){const imageKey=`life-trails-image-${fileUserId}-${imageName}`;localStorage.setItem(imageKey,eventImagesMap.value[imageName]);storedCount++}})}if(familyImagesMap.status==="fulfilled"&&familyImagesMap.value){const fileUserId=dataToSave.id;requiredFamilyImages.forEach(imageName=>{if(familyImagesMap.value[imageName]){const imageKey=`life-trails-image-${fileUserId}-${imageName}`;localStorage.setItem(imageKey,familyImagesMap.value[imageName]);storedCount++}})}const eventFailed=eventImagesMap.status==="rejected"?1:0;const familyFailed=familyImagesMap.status==="rejected"?1:0;console.log(`‚úÖ Image loading complete: ${storedCount} images stored (from ${requiredEventImages.size+requiredFamilyImages.size} required)`);if(eventFailed||familyFailed){console.warn(`‚ö†Ô∏è Some directories failed to load: Events: ${eventFailed}, Family: ${familyFailed}`)}}catch(error){console.warn("‚ö†Ô∏è Failed to load images:",error.message)}},100)}const dataKey=`life-trails-data-${dataToSave.id}`;const authData={userId:dataToSave.id,username:trimmedUsername,name:userInfo.name||userInfo.id||trimmedUsername,timestamp:Date.now(),isDemo:false};sessionStorage.setItem(`life-trails-pat-${trimmedUsername}`,decryptedToken);localStorage.setItem(AUTH_KEY,JSON.stringify(authData));if(window.eventsManager&&window.eventsManager.saveUserData){await window.eventsManager.saveUserData(dataToSave);console.log("‚úÖ User data saved to localStorage (encrypted)")}else{try{const encryptModule=await import("./services/encrypt.js");const encrypted=await encryptModule.encryptUserData(dataToSave,decryptedToken);localStorage.setItem(dataKey,encrypted);console.log("‚úÖ User data saved to localStorage (encrypted)")}catch(error){localStorage.setItem(dataKey,JSON.stringify(dataToSave));console.warn("‚ö†Ô∏è Encryption failed, data saved in plain text")}}console.log("üéâ Sign in successful!");return{success:true,user:authData}}catch(error){console.error("‚ùå Unexpected authentication error:",error);console.error("Error details:",{name:error.name,message:error.message,stack:error.stack});return{success:false,error:error.message||"Authentication failed"}}}function signUp(username,password,name,dateOfBirth,placeOfBirth){const trimmed=(username||"").trim();if(!isValidUsername(trimmed)){return{success:false,error:"Username can only contain letters, numbers, and . - _"}}return{success:false,error:"Contact administrator to add your account to the system."}}function signOut(){const authData=getCurrentUser();if(authData&&authData.username){const PAT_STORAGE_KEY=`life-trails-pat-${authData.username}`;sessionStorage.removeItem(PAT_STORAGE_KEY);const dataKey=`life-trails-data-${authData.userId}`;localStorage.removeItem(dataKey);console.log("‚úÖ User data cleared from localStorage")}localStorage.removeItem(AUTH_KEY)}function getCurrentUser(){const authData=localStorage.getItem(AUTH_KEY);if(!authData)return null;try{const auth=JSON.parse(authData);if(Date.now()-auth.timestamp>24*60*60*1e3){signOut();return null}return auth}catch(e){return null}}function isAuthenticated(){return getCurrentUser()!==null}function requireAuth(){if(!isAuthenticated()){const currentPath=window.location.pathname;let signinPath="app/signin/";if(currentPath.includes("/app/dashboard/")){signinPath="../signin/"}else if(currentPath.includes("/app/add/")){signinPath="../../signin/"}window.location.href=signinPath;return false}return true}window.auth={signIn:signIn,signUp:signUp,signOut:signOut,getCurrentUser:getCurrentUser,isAuthenticated:isAuthenticated,requireAuth:requireAuth}})();(function(){"use strict";let encryptUserData,decryptUserData;async function loadEncryptionModule(){if(!encryptUserData||!decryptUserData){try{const module=await import("./services/encrypt.js");encryptUserData=module.encryptUserData;decryptUserData=module.decryptUserData}catch(error){console.error("Failed to load encryption module:",error);encryptUserData=null;decryptUserData=null}}}async function getUserData(){const user=window.auth.getCurrentUser();if(!user)return null;await loadEncryptionModule();const dataKey=`life-trails-data-${user.userId}`;const encryptedData=localStorage.getItem(dataKey);if(encryptedData){try{if(decryptUserData){const PAT_STORAGE_KEY=`life-trails-pat-${user.username}`;const token=sessionStorage.getItem(PAT_STORAGE_KEY);if(token){const decrypted=await decryptUserData(encryptedData,token);return decrypted}else{console.warn("PAT not found, clearing encrypted data");localStorage.removeItem(dataKey)}}else{try{return JSON.parse(encryptedData)}catch(e){console.warn("Failed to parse data, may be encrypted");return null}}}catch(error){console.error("Failed to decrypt user data:",error);localStorage.removeItem(dataKey)}}return{id:user.userId,name:user.name,dateOfBirth:user.dateOfBirth||"",timeOfBirth:user.timeOfBirth||"",placeOfBirth:user.placeOfBirth||"",family:[],events:{}}}async function saveUserData(data){const user=window.auth.getCurrentUser();if(!user)return false;await loadEncryptionModule();const dataKey=`life-trails-data-${user.userId}`;try{if(encryptUserData){const PAT_STORAGE_KEY=`life-trails-pat-${user.username}`;const token=sessionStorage.getItem(PAT_STORAGE_KEY);if(token){const encrypted=await encryptUserData(data,token);localStorage.setItem(dataKey,encrypted);return true}else{console.warn("PAT not found, storing in plain text");localStorage.setItem(dataKey,JSON.stringify(data));return true}}else{localStorage.setItem(dataKey,JSON.stringify(data));return true}}catch(error){console.error("Failed to encrypt/save user data:",error);localStorage.setItem(dataKey,JSON.stringify(data));return true}}async function getAllEvents(){const data=await getUserData();if(!data||!data.events)return[];const allEvents=[];Object.keys(data.events).forEach(year=>{data.events[year].forEach(event=>{allEvents.push({...event,year:year,sortDate:new Date(event.date+" "+event.time)})})});return allEvents.sort((a,b)=>b.sortDate-a.sortDate)}async function addEvent(eventData){const data=await getUserData();if(!data)return false;const year=eventData.date.split("-")[0];if(!data.events[year]){data.events[year]=[]}const newEvent={date:eventData.date,time:eventData.time,title:eventData.title,description:eventData.description,place:eventData.place||"",images:eventData.images||[]};data.events[year].push(newEvent);return saveUserData(data)}async function deleteEvent(year,eventIndex){const data=await getUserData();if(!data||!data.events[year])return false;data.events[year].splice(eventIndex,1);if(data.events[year].length===0){delete data.events[year]}return saveUserData(data)}window.eventsManager={getUserData:getUserData,saveUserData:saveUserData,getAllEvents:getAllEvents,addEvent:addEvent,deleteEvent:deleteEvent}})();(function(){"use strict";async function getFamily(){const data=await window.eventsManager.getUserData();return data?data.family||[]:[]}async function addFamilyMember(memberData){const data=await window.eventsManager.getUserData();if(!data)return false;if(!data.family){data.family=[]}const newMember={name:memberData.name,relation:memberData.relation,level:parseInt(memberData.level),image:memberData.image||"default.png",nickname:memberData.nickname||null};data.family.push(newMember);return window.eventsManager.saveUserData(data)}async function deleteFamilyMember(index){const data=await window.eventsManager.getUserData();if(!data||!data.family)return false;data.family.splice(index,1);return window.eventsManager.saveUserData(data)}async function getFamilyByLevel(){const family=await getFamily();const levels={};family.forEach(member=>{if(!levels[member.level]){levels[member.level]=[]}levels[member.level].push(member)});return levels}function getGenerationLabel(level){if(level<=-2)return"Grand Parents";if(level===-1)return"Parents";if(level===0)return"Self / Siblings";if(level===1)return"Children";if(level>=2)return"Grand Children";return"Family"}window.familyManager={getFamily:getFamily,addFamilyMember:addFamilyMember,deleteFamilyMember:deleteFamilyMember,getFamilyByLevel:getFamilyByLevel,getGenerationLabel:getGenerationLabel}})();(function(){"use strict";const THEME_KEY="life-trails-theme";const DEFAULT_THEME="light";function initTheme(){const savedTheme=localStorage.getItem(THEME_KEY)||DEFAULT_THEME;setTheme(savedTheme)}function setTheme(theme){document.documentElement.setAttribute("data-theme",theme);localStorage.setItem(THEME_KEY,theme);updateThemeButton(theme)}function toggleTheme(){const currentTheme=document.documentElement.getAttribute("data-theme")||DEFAULT_THEME;const newTheme=currentTheme==="dark"?"light":"dark";setTheme(newTheme)}function updateThemeButton(theme){const buttons=document.querySelectorAll(".theme-toggle");buttons.forEach(btn=>{const isDark=theme==="dark";btn.setAttribute("data-theme",theme);btn.setAttribute("aria-label",`Switch to ${isDark?"light":"dark"} theme`);const track=btn.querySelector(".theme-toggle-track");const knob=btn.querySelector(".theme-toggle-knob");const text=btn.querySelector(".theme-toggle-text");if(!track||!knob)return;if(isDark){btn.classList.add("theme-toggle-dark");btn.classList.remove("theme-toggle-light");if(text){text.innerHTML="DARK<br>MODE"}const sunIcon=knob.querySelector(".theme-toggle-icon-sun");const moonIcon=knob.querySelector(".theme-toggle-icon-moon");if(sunIcon)sunIcon.removeAttribute("style");if(moonIcon)moonIcon.removeAttribute("style");if(!sunIcon||!moonIcon){knob.innerHTML=`\n                        <svg class="theme-toggle-icon theme-toggle-icon-sun" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n                            <circle cx="12" cy="12" r="4" stroke="currentColor" stroke-width="2" fill="none"/>\n                            <path d="M12 2v2M12 20v2M4.93 4.93l1.41 1.41M17.66 17.66l1.41 1.41M2 12h2M20 12h2M4.93 19.07l1.41-1.41M17.66 6.34l1.41-1.41" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>\n                        </svg>\n                        <svg class="theme-toggle-icon theme-toggle-icon-moon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n                            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z" stroke="currentColor" stroke-width="2" fill="none"/>\n                        </svg>\n                    `}}else{btn.classList.add("theme-toggle-light");btn.classList.remove("theme-toggle-dark");if(text){text.innerHTML="LIGHT<br>MODE"}const sunIcon=knob.querySelector(".theme-toggle-icon-sun");const moonIcon=knob.querySelector(".theme-toggle-icon-moon");if(sunIcon)sunIcon.removeAttribute("style");if(moonIcon)moonIcon.removeAttribute("style");if(!sunIcon||!moonIcon){knob.innerHTML=`\n                        <svg class="theme-toggle-icon theme-toggle-icon-sun" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n                            <circle cx="12" cy="12" r="4" stroke="currentColor" stroke-width="2" fill="none"/>\n                            <path d="M12 2v2M12 20v2M4.93 4.93l1.41 1.41M17.66 17.66l1.41 1.41M2 12h2M20 12h2M4.93 19.07l1.41-1.41M17.66 6.34l1.41-1.41" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>\n                        </svg>\n                        <svg class="theme-toggle-icon theme-toggle-icon-moon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n                            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z" stroke="currentColor" stroke-width="2" fill="none"/>\n                        </svg>\n                    `}}})}if(document.readyState==="loading"){document.addEventListener("DOMContentLoaded",initTheme)}else{initTheme()}window.themeManager={toggle:toggleTheme,set:setTheme,init:initTheme}})();